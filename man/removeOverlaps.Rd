% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ESD.R
\name{removeOverlaps}
\alias{removeOverlaps}
\title{Remove overlapping episodes from final ESD output}
\usage{
removeOverlaps(
  esdDf,
  personIdCol = "person_id",
  startDateCol = "final_episode_start_date",
  endDateCol = "final_episode_end_date"
)
}
\arguments{
\item{esdDf}{Data frame of final ESD output (e.g. from \code{runEsd} or
\code{final_pregnancy_episodes.rds}) with at least \code{person_id},
\code{final_episode_start_date}, \code{final_episode_end_date}. Optional
columns used for prioritization: \code{hip_flag}, \code{final_outcome_category},
\code{hip_outcome_category}, \code{esd_outcome_match}, \code{esd_precision_days},
\code{esd_gw_flag}. If \code{hip_flag} is missing it is treated as 0.}

\item{personIdCol}{Character. Name of the person identifier column (default \code{"person_id"}).}

\item{startDateCol}{Character. Name of the episode start date column (default \code{"final_episode_start_date"}).}

\item{endDateCol}{Character. Name of the episode end date column (default \code{"final_episode_end_date"}).}
}
\value{
Data frame with the same columns as \code{esdDf}, with overlapping
  episodes removed (one episode retained per overlap group per person).
}
\description{
Within each person, groups episodes whose date ranges overlap and keeps a single
episode per group. Prioritization: (1) \code{hip_flag == 1} over 0; (2) among HIP
episodes, HIP outcome hierarchy (live birth > stillbirth > delivery > ectopic >
abortion/miscarriage > ongoing); (3) \code{esd_outcome_match == 1} (concordant);
(4) better ESD precision (lower \code{esd_precision_days}); (5) gestational week
evidence (\code{esd_gw_flag}); (6) earliest \code{final_episode_end_date}; (7) first row.
}
