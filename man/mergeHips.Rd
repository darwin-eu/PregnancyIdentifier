% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mergeHIPPS.R
\name{mergeHips}
\alias{mergeHips}
\title{Merge HIP and PPS episodes into a unified HIPPS episode table}
\usage{
mergeHips(cdm, outputDir, logger)
}
\arguments{
\item{cdm}{(`cdm_reference`) CDM reference containing required tables
(`preg_initial_cohort`, `preg_pps_concepts`, etc.).}

\item{outputDir}{(`character(1)`) Directory containing intermediate RDS artifacts:
`PPS_min_max_episodes.rds`, `PPS_gest_timing_episodes.rds`, `HIP_episodes.rds`.}

\item{logger}{(`logger`) log4r logger.}
}
\value{
Invisibly returns `NULL` and writes `HIPPS_episodes.rds` to `outputDir`.
}
\description{
Reads previously-saved HIP and PPS outputs from `outputDir`, infers pregnancy outcomes
for PPS episodes using a lookback/lookahead window around each PPS episode end,
merges HIP and PPS episodes based on temporal overlap, resolves many-to-many overlaps
by selecting the best-matching pairs, and returns a single per-person episode table
with standardized columns used downstream by ESD and reporting.
}
\details{
Key steps:
\itemize{
  \item Load HIP episodes, PPS episode rows, and PPS episode min/max summary tables
  \item Infer PPS outcomes from `cdm$preg_initial_cohort` within an episode-specific window
  \item Merge HIP + PPS episodes by overlap; flag episodes involved in many-to-many overlaps
  \item Remove duplicated overlap matches (retain best matches by end-date proximity and episode plausibility)
  \item Add standardized columns and per-person episode ordering
}
}
